function getColor(a){return a>35e3?"#b10026":a>3e4?"#e31a1c":a>25e3?"#fc4e2a":a>2e4?"#fd8d3c":a>15e3?"#feb24c":a>1e4?"#fed976":a>5e3?"#ffeda0":"#ffffcc"}function style(a){return globalStyle.fillColor=getColor(a.properties._kepadatan_2015),globalStyle}function highlightFeature(a){var b=a.target;b.setStyle({weight:5,color:"#666",dashArray:"3",fillOpacity:.9}),L.Browser.ie||L.Browser.opera||b.bringToFront(),info.update(b.feature.properties)}function resetHighlight(a){var b=a.target;b.setStyle({weight:1,opacity:1,color:"white",dashArray:"3",fillOpacity:.9}),info.update()}function openModal(a){var b=a.target.feature.properties._url;$.getJSON("src/json/data.json",function(a){for(var c=a.length,d=0;d<c;d++)a[d].url==b&&dataStatistik(a[d])}),$("#statsModal").modal("show"),a.target.getBounds()}function dataStatistik(a){$(function(){$("#statistik").highcharts({chart:{type:"line",width:890,style:{fontFamily:"PT Sans"}},title:{text:"Jumlah Penduduk di Kecamatan "+a.kecamatan+" Tahun 2009 - 2015"},subtitle:{text:"Sumber: Portal Data Bandung"},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},xAxis:{categories:["2009","2010","2011","2012","2013","2014","2015"],title:{text:"Tahun"}},yAxis:{min:0,title:{text:"Jumlah Penduduk"}},series:[{name:"Jumlah Penduduk",data:[a.tahun_2009,a.tahun_2010,a.tahun_2011,a.tahun_2012,a.tahun_2013,a.tahun_2014,a.tahun_2015],color:"#b10026"},{name:"Jumlah Kepadatan Penduduk (km2)",data:[a.kepadatan_2009,a.kepadatan_2010,a.kepadatan_2011,a.kepadatan_2012,a.kepadatan_2013,a.kepadatan_2014,a.kepadatan_2015],color:"#fc4e2a"}]})})}function onEachFeature(a,b){b.on({mouseover:highlightFeature,mouseout:resetHighlight,click:openModal})}L.mapbox.accessToken="pk.eyJ1IjoidHJ5ZmF0dXIiLCJhIjoiY2lxdDJ5d3R1MDAydmZybmh3a3VtcmFvMiJ9.lL9RoXOtTscOHiSvOCrL-Q";var map=L.mapbox.map("map").setView([-6.909620,107.634553],13),info=L.control(),datasource=L.control(),legend=L.control({position:"bottomright"}),geojson,globalStyle={weight:1,opacity:1,color:"white",dashArray:"3",fillOpacity:.9},data=[{text:"Jumlah Kepadatan Penduduk Tahun 2015",value:"2015"},{text:"Jumlah Kepadatan Penduduk Tahun 2014",value:"2014"},{text:"Jumlah Kepadatan Penduduk Tahun 2013",value:"2013"},{text:"Jumlah Kepadatan Penduduk Tahun 2012",value:"2012"},{text:"Jumlah Kepadatan Penduduk Tahun 2010",value:"2010"},{text:"Jumlah Kepadatan Penduduk Tahun 2009",value:"2009"}];L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token="+L.mapbox.accessToken).addTo(map),info.onAdd=function(a){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},info.update=function(a){this._div.innerHTML="<h4><b>Peta Tematik Kepadatan Kota Bandung</b></h4>"+(a?"<b>Kecamatan: "+a._kecamatan+"</b>":"Pilih Kecamatan")},info.addTo(map),datasource.onAdd=function(a){return this._div=L.DomUtil.create("div","info"),this._div.innerHTML='<b>Sumber Data: </b><select id="dataSource"></select>',this._div},datasource.addTo(map),legend.onAdd=function(a){for(var b=L.DomUtil.create("div","info legend"),c=[0,5e3,1e4,15e3,2e4,25e3,3e4,35e3],e=0;e<c.length;e++)b.innerHTML+='<i style="background:'+getColor(c[e]+1)+'"></i> '+c[e]+(c[e+1]?"&ndash;"+c[e+1]+"<br>":"+");return b},legend.addTo(map),geojson=L.geoJson(baseMap,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map),$.each(data,function(a){$("#dataSource").append('<option value="'+data[a].value+'">'+data[a].text+"</option>")}),$("#dataSource").change(function(){switch(this.value){case"2015":geojson.setStyle(function(b){return{fillColor:getColor(b.properties._kepadatan_2015)}});break;case"2014":geojson.setStyle(function(b){return{fillColor:getColor(b.properties._kepadatan_2014)}});break;case"2013":geojson.setStyle(function(b){return{fillColor:getColor(b.properties._kepadatan_2013)}});break;case"2012":geojson.setStyle(function(b){return{fillColor:getColor(b.properties._kepadatan_2012)}});break;case"2010":geojson.setStyle(function(b){return{fillColor:getColor(b.properties._kepadatan_2010)}});break;case"2009":geojson.setStyle(function(b){return{fillColor:getColor(b.properties._kepadatan_2009)}})}}),map.attributionControl.addAttribution('Data Populasi &copy; <a href="http://data.bandung.go.id/">Portal Data Bandung</a>'),map.attributionControl.addAttribution('<a href="https://github.com/tryfatur" target="_blank">Try Fathur Rachman</a> &copy 2016;');